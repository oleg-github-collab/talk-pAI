# Talk pAI COTURN Server Configuration
# Production-ready TURN/STUN server for WebRTC

# Listening port for TURN/STUN
listening-port=3478
tls-listening-port=5349

# Alternative ports for firewall traversal
alt-listening-port=3479
alt-tls-listening-port=5350

# Listening IPs - bind to all interfaces
listening-ip=0.0.0.0
relay-ip=0.0.0.0

# External IP (must be set to your server's public IP)
# external-ip=YOUR_PUBLIC_IP

# Relay ports range for media
min-port=49152
max-port=65535

# Enable verbose logging for debugging
verbose
log-file=/var/log/turnserver.log

# Use fingerprint in TURN message
fingerprint

# Use long-term credential mechanism
lt-cred-mech

# Users database - use for static credentials
# user=talkpai:talkpai123

# Use auth secret for dynamic credentials (recommended)
use-auth-secret
static-auth-secret=talkpai-secret

# Server name
server-name=talk-pai-turn

# Realm for authentication
realm=talkpai.com

# Total quota for relay traffic per user session
total-quota=100
bps-quota=0
stale-nonce=600

# No multicast relay
no-multicast-peers

# Disable CLI (for security)
no-cli

# No TLS, just DTLS for WebRTC
no-tls
no-dtls

# Enable STUN/TURN for WebRTC
no-stun-backward-compatibility
response-origin-only-with-rfc5780

# Security settings
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255

# Allow only specific ranges if needed
# allowed-peer-ip=0.0.0.0-255.255.255.255

# PID file
pidfile=/var/run/turnserver.pid

# Process user (run as non-root)
proc-user=turnserver
proc-group=turnserver

# Certificate files for TLS (if using HTTPS)
# cert=/etc/ssl/certs/talkpai.crt
# pkey=/etc/ssl/private/talkpai.key

# Disable software relay
# no-software-attribute

# WebRTC optimization
mobility
no-cli